	IN 10H
	LXI B,00C8H 	;LOAD 200 TO BC
	MVI D,96H 	;REGISTER 150 TO THE COUNTER
	MVI E,FFH
	MVI A,FFH
	STA 3000H
CHECK:
	LDA 2000H	;INPUT FROM DIP SWITCHES
	ANI 80H	;ISOLATE MSB
	CPI 80H     	;CHECK IF IT'S 1
	JNZ CHECK	;LOOP UNTIL 1
	
	CALL DELB     ;DELAY UNTIL NEW INPUT
CHCK2:
	LDA 2000H	;NEW INPUT
	ANI 80H	;ISOLATE MSB
	CPI 00H	;CHECK IF IT'S 0
	JNZ CHCK2	;LOOP UNTIL 0
;WAITING FOR PUSH BUTTON

LIGHTS:
	LDA 2000H	;NEW INPUT
	ANI 01H	;ISOLATE MSB
	CPI 01H 	;CHECK IF IT'S 1
	JZ LIGHTS2	;IF YES GO TO LIGHTS2
	MOV A,E	;PREVIOUS STATE TO A
	CMA 		
	STA 3000H	
	MOV E,A	;NEW STATE TO E
	CALL DELB	
	DCR D		;DECREASE COUNTER
	JNZ LIGHTS	

	MVI D,96H	;INITIALIZATION
	MVI E,FFH
	MVI A,FFH
	STA 3000H
	JMP CHECK


;WAITING FOR PUSH BUTTON TO BE LET

LIGHTS2:
	LDA 2000H	
	ANI 01H
	CPI 00H
	JNZ LIGHTS3	;PUSH BUTTON FREE
	MVI D,96H	;INITIALISE COUNTER
	JMP LIGHTS	;BACK TO START
LIGHTS3:
	MOV A,E
	CMA
	STA 3000H
	MOV E,A
	CALL DELB
	DCR D
	JNZ LIGHTS2
	
	MVI D,96H	;INITIALIZATION
	MVI E,FFH
	MVI A,FFH
	STA 3000H
	JMP CHECK
	HLT
	END